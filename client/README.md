# Claude Stats Client

Claude Code ä½¿ç”¨ç»Ÿè®¡è·Ÿè¸ªå®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨æ”¶é›†å¹¶ä¸Šä¼ ä½¿ç”¨æ•°æ®åˆ°ç»Ÿè®¡æœåŠ¡å™¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š è‡ªåŠ¨è·Ÿè¸ª Claude Code ä½¿ç”¨æ•°æ®
- ğŸ”§ ç®€å•çš„å‘½ä»¤è¡Œé…ç½®
- ğŸ“ˆ æŸ¥çœ‹ä¸ªäººä½¿ç”¨ç»Ÿè®¡
- ğŸŒ è®¿é—® Web Dashboard
- ğŸ”’ å¯éšæ—¶å¯ç”¨/ç¦ç”¨è·Ÿè¸ª

## å®‰è£…

### å…¨å±€å®‰è£…

```bash
npm install -g claude-stats
```

### æˆ–ä½¿ç”¨ npxï¼ˆæ¨èï¼‰

```bash
npx claude-stats init
```

## å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–é…ç½®

```bash
claude-stats init
```

ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥ï¼š
- **ç”¨æˆ·å**: ç”¨äºè¯†åˆ«æ‚¨çš„æ•°æ®ï¼ˆå»ºè®®ä½¿ç”¨è‹±æ–‡ï¼‰
- **æœåŠ¡å™¨åœ°å€**: ç»Ÿè®¡æœåŠ¡å™¨çš„ URL
- **æ˜¯å¦å¯ç”¨**: æ˜¯å¦ç«‹å³å¯ç”¨è·Ÿè¸ª

### 2. æŸ¥çœ‹ç»Ÿè®¡

```bash
# æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡
claude-stats stats

# æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„ç»Ÿè®¡
claude-stats stats -u username
```

### 3. æ‰“å¼€ Dashboard

```bash
claude-stats dashboard
```

## å‘½ä»¤è¯´æ˜

### `claude-stats init`
åˆå§‹åŒ–é…ç½®å¹¶å®‰è£… Hook

### `claude-stats stats [options]`
æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡
- `-u, --user <username>`: æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„ç»Ÿè®¡

### `claude-stats dashboard`
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Dashboard

### `claude-stats toggle`
å¯ç”¨æˆ–ç¦ç”¨æ•°æ®è·Ÿè¸ª

### `claude-stats config [options]`
ç®¡ç†é…ç½®
- `-s, --show`: æ˜¾ç¤ºå½“å‰é…ç½®
- `-e, --edit`: ç¼–è¾‘é…ç½®

### `claude-stats reset [options]`
é‡ç½®é…ç½®å¹¶ç§»é™¤ Hook
- `-f, --force`: è·³è¿‡ç¡®è®¤

## å·¥ä½œåŸç†

1. **Hook å®‰è£…**: åœ¨ Claude Code çš„ Stop Hook ä¸­æ³¨å†Œè„šæœ¬
2. **æ•°æ®æ”¶é›†**: Claude Code ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨è§¦å‘ Hook
3. **æ•°æ®æå–**: ä» `.jsonl` æ–‡ä»¶ä¸­æå–ä»¤ç‰Œä½¿ç”¨ä¿¡æ¯
4. **æ•°æ®ä¸Šä¼ **: å°†æ•°æ®å‘é€åˆ°é…ç½®çš„æœåŠ¡å™¨
5. **å»é‡æœºåˆ¶**: åŸºäºäº¤äº’å“ˆå¸Œé¿å…é‡å¤æäº¤

## é…ç½®æ–‡ä»¶

é…ç½®ä¿å­˜åœ¨ `~/.claude/stats-config.json`ï¼š

```json
{
  "username": "your_username",
  "serverUrl": "<your-server-url>",
  "enabled": true,
  "createdAt": "2024-01-01T00:00:00.000Z"
}
```

## Hook è„šæœ¬

Hook è„šæœ¬å®‰è£…åœ¨ `~/.claude/claude_stats_hook.js`ï¼Œåœ¨æ¯æ¬¡ Claude Code ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

## éšç§è¯´æ˜

### æ”¶é›†çš„æ•°æ®
- ä»¤ç‰Œä½¿ç”¨é‡ï¼ˆè¾“å…¥/è¾“å‡º/ç¼“å­˜ï¼‰
- ä½¿ç”¨æ—¶é—´æˆ³
- æ¨¡å‹åç§°
- ä¼šè¯ IDï¼ˆç”¨äºç»Ÿè®¡ï¼‰

### ä¸æ”¶é›†çš„æ•°æ®
- æ‚¨çš„æç¤ºå†…å®¹
- Claude çš„å“åº”å†…å®¹
- æ‚¨çš„ä»£ç æˆ–æ–‡ä»¶

## æ•…éšœæ’é™¤

### Hook æœªè§¦å‘
1. æ£€æŸ¥ `~/.claude/settings.json` ä¸­æ˜¯å¦æ­£ç¡®æ³¨å†Œäº† Hook
2. ç¡®è®¤ Hook è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼š`ls -la ~/.claude/claude_stats_hook.js`

### æ•°æ®æœªä¸Šä¼ 
1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. éªŒè¯æœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®ï¼š`claude-stats config -s`
3. ç¡®è®¤è·Ÿè¸ªå·²å¯ç”¨ï¼š`claude-stats toggle`

### é‡æ–°å®‰è£…
```bash
# é‡ç½®æ‰€æœ‰é…ç½®
claude-stats reset

# é‡æ–°åˆå§‹åŒ–
claude-stats init
```

## å¼€å‘

### ç›®å½•ç»“æ„

```
client/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.js          # CLI å…¥å£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ commands/       # å‘½ä»¤å®ç°
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.js        # ä¸»å…¥å£
â””â”€â”€ hooks/
    â””â”€â”€ count_tokens.js # Hook è„šæœ¬æ¨¡æ¿
```

### æœ¬åœ°æµ‹è¯•

```bash
# å®‰è£…ä¾èµ–
npm install

# æµ‹è¯• CLI
node bin/cli.js --help

# é“¾æ¥åˆ°å…¨å±€
npm link
```

## æœåŠ¡å™¨

å®¢æˆ·ç«¯å¯ä»¥è¿æ¥åˆ°ä»»ä½•éƒ¨ç½²çš„ç»Ÿè®¡æœåŠ¡å™¨ï¼š
- é…ç½®åœ°å€ï¼šåœ¨åˆå§‹åŒ–æ—¶è®¾ç½®æˆ–ç¼–è¾‘ `~/.claude/stats-config.json`
- Dashboardï¼šç›´æ¥è®¿é—®æœåŠ¡å™¨åœ°å€æŸ¥çœ‹
- API ç«¯ç‚¹ï¼š
  - `POST /api/usage/submit`: æäº¤ä½¿ç”¨æ•°æ®
  - `GET /api/stats/user/:username`: è·å–ç”¨æˆ·ç»Ÿè®¡
  - `GET /api/stats/rankings`: è·å–æ’è¡Œæ¦œ
  - `GET /api/stats/pricing`: è·å–ä»·æ ¼ä¿¡æ¯

## License

MIT