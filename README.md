# Claude Stats - å›¢é˜Ÿä½¿ç”¨ç»Ÿè®¡ç³»ç»Ÿ

ç®€å•ã€æ— è®¤è¯çš„ Claude Code ä½¿ç”¨ç»Ÿè®¡ç³»ç»Ÿï¼Œé€‚åˆå›¢é˜Ÿå†…éƒ¨ä½¿ç”¨ã€‚

## ğŸ¯ ç‰¹æ€§

- ğŸ“Š **æ™ºèƒ½æ•°æ®æ”¶é›†** - v3 Hook ä¼˜åŒ–æ€§èƒ½ï¼Œç¡®ä¿ 100% å‡†ç¡®çš„ä½¿ç”¨ç»Ÿè®¡
- ğŸš€ æ— éœ€ç™»å½•è®¤è¯ï¼Œé€šè¿‡ç”¨æˆ·åè¯†åˆ«
- ğŸ“ˆ ç¾è§‚çš„ Web Dashboard å®æ—¶å±•ç¤º
- ğŸ’¾ SQLite æ•°æ®åº“ï¼Œæ˜“äºéƒ¨ç½²
- ğŸ”§ ä¸€é”®å®‰è£…é…ç½®
- ğŸ¢ æ”¯æŒå›¢é˜Ÿè‡ªå»ºæœåŠ¡å™¨
- ğŸ”„ **çŠ¶æ€ç®¡ç†** - æ™ºèƒ½å»é‡ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- ğŸ›¡ï¸ **æ•…éšœæ¢å¤** - è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - v3 å¤„ç†é€Ÿåº¦æå‡ 4-5 å€ï¼Œæ”¯æŒå¤§æ•°æ®é‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶

éœ€è¦å…ˆéƒ¨ç½²æœåŠ¡å™¨ï¼ˆè§ä¸‹æ–¹éƒ¨ç½²è¯´æ˜ï¼‰æˆ–ä½¿ç”¨å›¢é˜Ÿå·²æœ‰çš„æœåŠ¡å™¨åœ°å€ã€‚

### 1. å®‰è£…å®¢æˆ·ç«¯

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-fork/claude-code-leaderboard.git
cd claude-code-leaderboard

# é‡è¦ï¼šè¿›å…¥ client ç›®å½•
cd client

# å®‰è£…ä¾èµ–
npm install

# å…¨å±€å®‰è£…å®¢æˆ·ç«¯
npm link

# åˆå§‹åŒ–é…ç½®
claude-stats init
```

æˆ–è€…ä½¿ç”¨ npxï¼ˆå¦‚æœå·²å‘å¸ƒåˆ° npmï¼‰ï¼š
```bash
npx claude-stats init
```

### 2. é…ç½®

```bash
claude-stats init

# é…ç½®ç¤ºä¾‹
> ç”¨æˆ·å: john_doe
> æœåŠ¡å™¨åœ°å€: https://your-team-server.com  # å¿…é¡»æä¾›æœåŠ¡å™¨åœ°å€
> å¯ç”¨è·Ÿè¸ª: Yes

# âœ… å®Œæˆï¼æ•°æ®ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°é…ç½®çš„æœåŠ¡å™¨
```

### 3. æŸ¥çœ‹ç»Ÿè®¡

```bash
# å‘½ä»¤è¡ŒæŸ¥çœ‹
claude-stats stats

# æ‰“å¼€ Web Dashboard
claude-stats dashboard
# æˆ–ç›´æ¥è®¿é—®: https://claude-code-leaderboard.onrender.com
```

## ğŸ“Š ä½¿ç”¨æ–¹æ³•

### CLI å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `claude-stats init` | åˆå§‹åŒ–é…ç½®å¹¶å®‰è£… v3 Hook |
| `claude-stats stats` | æŸ¥çœ‹ä¸ªäººç»Ÿè®¡ |
| `claude-stats stats -u <user>` | æŸ¥çœ‹æŒ‡å®šç”¨æˆ·ç»Ÿè®¡ |
| `claude-stats dashboard` | æ‰“å¼€ Web Dashboard |
| `claude-stats toggle` | å¯ç”¨/ç¦ç”¨è·Ÿè¸ª |
| `claude-stats config --show` | æ˜¾ç¤ºé…ç½® |
| `claude-stats config --edit` | ç¼–è¾‘é…ç½® |
| `claude-stats reset` | é‡ç½®é…ç½® |
| `claude-stats hook-version` | æŸ¥çœ‹ Hook ç‰ˆæœ¬ä¿¡æ¯ |
| `claude-stats upgrade-to-v3` | å‡çº§åˆ° v3 Hookï¼ˆæ¨èï¼‰ |
| `claude-stats cleanup` | æ¸…ç†çŠ¶æ€æ–‡ä»¶ |
| `claude-stats debug` | æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ |

### Web Dashboard åŠŸèƒ½

è®¿é—®ä½ çš„æœåŠ¡å™¨åœ°å€æŸ¥çœ‹ï¼š
- ğŸ“Š å®æ—¶ç»Ÿè®¡æ•°æ®
- ğŸ† ç”¨æˆ·æ’è¡Œæ¦œ
- ğŸ“ˆ ä½¿ç”¨è¶‹åŠ¿å›¾è¡¨
- ğŸ• æœ€è¿‘æ´»åŠ¨è®°å½•

## ğŸ— ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ· Claude Code â†’ Hook è§¦å‘ â†’ å®¢æˆ·ç«¯ CLI â†’ æœåŠ¡å™¨ API â†’ SQLite â†’ Dashboard
```

### é¡¹ç›®ç»“æ„

```
claude-code-leaderboard/
â”œâ”€â”€ server/          # æœåŠ¡ç«¯ï¼ˆå·²éƒ¨ç½²åˆ° Renderï¼‰
â”‚   â”œâ”€â”€ index.js     # Express æœåŠ¡å™¨
â”‚   â”œâ”€â”€ db/          # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ routes/      # API è·¯ç”±
â”‚   â””â”€â”€ public/      # Dashboard å‰ç«¯
â”‚
â””â”€â”€ client/          # å®¢æˆ·ç«¯ CLI å·¥å…·
    â”œâ”€â”€ bin/         # CLI å…¥å£
    â”œâ”€â”€ src/         # å‘½ä»¤å®ç°
    â””â”€â”€ hooks/       # Claude Hook è„šæœ¬
```

## ğŸ”§ å¼€å‘è€…æŒ‡å—

### æœ¬åœ°å¼€å‘

#### æœåŠ¡ç«¯
```bash
cd server
npm install
npm start
# è®¿é—® http://localhost:3000
```

#### å®¢æˆ·ç«¯
```bash
cd client
npm install
npm link  # æœ¬åœ°å…¨å±€å®‰è£…
claude-stats init
```

## ğŸ–¥ï¸ éƒ¨ç½²æœåŠ¡å™¨

å›¢é˜Ÿéœ€è¦å…ˆéƒ¨ç½²è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä»¥ä¸‹æ˜¯å‡ ç§éƒ¨ç½²æ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šRender éƒ¨ç½²ï¼ˆæ¨èï¼‰
1. Fork æ­¤ä»“åº“åˆ°ä½ çš„ GitHub
2. åœ¨ [Render](https://render.com) åˆ›å»ºæ–°çš„ Web Service
3. è¿æ¥ä½ çš„ GitHub ä»“åº“ï¼Œè®¾ç½®ï¼š
   - **Root Directory**: `server`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
4. æ·»åŠ æŒä¹…åŒ–ç£ç›˜ï¼ˆPersistent Diskï¼‰ï¼š
   - **Name**: `stats-data`
   - **Mount Path**: `/data`
   - **Size**: 1GB (å…è´¹å¥—é¤è¶³å¤Ÿ)
5. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   ```
   NODE_ENV=production
   DB_PATH=/data/stats.db
   ```
6. éƒ¨ç½²å®Œæˆåï¼Œè®°å½•æœåŠ¡å™¨ URLï¼ˆå¦‚ `https://your-app.onrender.com`ï¼‰
7. å®¢æˆ·ç«¯é…ç½®æ—¶é€‰æ‹©è‡ªå®šä¹‰æœåŠ¡å™¨å¹¶è¾“å…¥ä½ çš„æœåŠ¡å™¨åœ°å€

#### æ–¹å¼äºŒï¼šæœ¬åœ°éƒ¨ç½²
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-fork/claude-code-leaderboard.git
cd claude-code-leaderboard/server

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡å™¨
npm start

# æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
```

#### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²
```bash
cd server
docker build -t claude-stats-server .
docker run -p 3000:3000 -v ./data:/data claude-stats-server
```

## ğŸ“¡ API æ¥å£

æœåŠ¡å™¨æä¾›ä»¥ä¸‹ API ç«¯ç‚¹ï¼ˆæ— éœ€è®¤è¯ï¼‰ï¼š

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/usage/submit` | POST | æäº¤ä½¿ç”¨æ•°æ® |
| `/api/stats/overview` | GET | è·å–æ€»ä½“ç»Ÿè®¡ |
| `/api/stats/user/:username` | GET | è·å–ç”¨æˆ·ç»Ÿè®¡ |
| `/api/stats/rankings` | GET | è·å–æ’è¡Œæ¦œ |
| `/api/stats/trends` | GET | è·å–è¶‹åŠ¿æ•°æ® |
| `/health` | GET | å¥åº·æ£€æŸ¥ |

### æ•°æ®æäº¤æ ¼å¼

```json
{
  "username": "john_doe",
  "usage": {
    "timestamp": "2024-01-01T12:00:00Z",
    "tokens": {
      "input": 1000,
      "output": 500,
      "cache_creation": 100,
      "cache_read": 50
    },
    "model": "claude-3-opus",
    "session_id": "abc123",
    "interaction_hash": "xyz789"
  }
}
```

## ğŸ›  æŠ€æœ¯æ ˆ

- **æœåŠ¡ç«¯**: Node.js + Express + SQLite
- **å®¢æˆ·ç«¯**: Node.js CLI (Commander.js)
- **å‰ç«¯**: HTML + CSS + Chart.js
- **éƒ¨ç½²**: Render + Persistent Disk
- **æ•°æ®æ”¶é›†**: Claude Code Stop Hook

## ğŸš€ Hook ç³»ç»Ÿ

### v3 Hookï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰

#### ä¸»è¦ä¼˜åŒ–
- **åŠ¨æ€æ‰¹æ¬¡å¤§å°**: æ ¹æ®æ•°æ®é‡è‡ªåŠ¨è°ƒæ•´ï¼ˆ100/500/1000æ¡ï¼‰
- **è¶…æ—¶ä¿æŠ¤**: é˜²æ­¢å¤„ç†å¤§é‡æ•°æ®æ—¶å¡æ­»ï¼ˆ5åˆ†é’Ÿæ€»è¶…æ—¶ï¼‰
- **è¿›åº¦æŠ¥å‘Š**: å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œé€Ÿåº¦
- **æ€§èƒ½æå‡**: å¤„ç†é€Ÿåº¦æå‡ 4-5 å€
- **æ›´å¥½çš„é”™è¯¯æ¢å¤**: ç²¾ç¡®è®°å½•å¤±è´¥æ•°æ®ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ 

#### æ€§èƒ½å¯¹æ¯”
- **æ—§ç‰ˆ**: å¤„ç† 20,000 æ¡æ•°æ®å¯èƒ½å¡æ­»
- **v3**: å¤„ç† 20,000 æ¡æ•°æ®çº¦éœ€ 45 ç§’ï¼ˆ~450æ¡/ç§’ï¼‰

### æ ¸å¿ƒç‰¹æ€§
- **å®Œæ•´æ•°æ®æ”¶é›†**: æ”¶é›†æ‰€æœ‰æœªå¤„ç†çš„ä½¿ç”¨æ•°æ®
- **æ™ºèƒ½çŠ¶æ€ç®¡ç†**: è®°å½•å·²å¤„ç†çš„æ•°æ®ï¼Œé¿å…é‡å¤ç»Ÿè®¡
- **è‡ªåŠ¨é‡è¯•æœºåˆ¶**: ç½‘ç»œå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **åŸå­å†™å…¥**: é˜²æ­¢çŠ¶æ€æ–‡ä»¶æŸå
- **æ–‡ä»¶é”æœºåˆ¶**: é˜²æ­¢å¹¶å‘å†²çª

### å‡çº§æŒ‡å—

**æ–°ç”¨æˆ·**: ç›´æ¥è¿è¡Œ `claude-stats init`ï¼Œä¼šè‡ªåŠ¨å®‰è£… v3

**ç°æœ‰ç”¨æˆ·**: 
1. æ›´æ–°ä»£ç : `git pull`
2. å‡çº§åˆ° v3: `claude-stats upgrade-to-v3`

### è°ƒè¯•åŠŸèƒ½

```bash
# æŸ¥çœ‹ Hook ç‰ˆæœ¬
claude-stats hook-version

# å¼€å¯è°ƒè¯•æ¨¡å¼
CLAUDE_STATS_DEBUG=true claude-stats debug --logs

# æ¸…ç†çŠ¶æ€æ–‡ä»¶ï¼ˆå¦‚é‡é—®é¢˜ï¼‰
claude-stats cleanup
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ç¡®è®¤ Hook æ˜¯å¦å®‰è£…æˆåŠŸï¼Ÿ
A: è¿è¡Œ `claude-stats hook-version` æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæˆ–æ£€æŸ¥ `~/.claude/settings.json`ã€‚

### Q: v3 Hook æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
A: v3 å¤§å¹…æå‡æ€§èƒ½ï¼Œå¤„ç†é€Ÿåº¦å¿« 4-5 å€ï¼Œæ”¯æŒè¶…å¤§æ•°æ®é‡ï¼Œä¸ä¼šå¡æ­»ã€‚

### Q: å¦‚ä½•å‡çº§åˆ° v3ï¼Ÿ
A: è¿è¡Œ `claude-stats upgrade-to-v3` å³å¯ä¸€é”®å‡çº§ã€‚

### Q: æ•°æ®å¤šä¹…åŒæ­¥ä¸€æ¬¡ï¼Ÿ
A: æ¯æ¬¡ Claude Code ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨åŒæ­¥æ‰€æœ‰æœªå¤„ç†çš„æ•°æ®ã€‚

### Q: å¦‚ä½•ä¿®æ”¹ç”¨æˆ·åæˆ–æœåŠ¡å™¨åœ°å€ï¼Ÿ
A: è¿è¡Œ `claude-stats config --edit` ä¿®æ”¹é…ç½®ã€‚

### Q: æœåŠ¡å™¨è¿”å› 500 é”™è¯¯ï¼Ÿ
A: å¯èƒ½æ˜¯æ•°æ®åº“åˆå§‹åŒ–é—®é¢˜ï¼Œç¨ç­‰ç‰‡åˆ»è®©æœåŠ¡å™¨é‡å¯ï¼Œæˆ–æ£€æŸ¥ `/health` ç«¯ç‚¹ã€‚

### Q: æ²¡æœ‰æœåŠ¡å™¨åœ°å€æ€ä¹ˆåŠï¼Ÿ
A: å¿…é¡»å…ˆéƒ¨ç½²æœåŠ¡å™¨æˆ–ä»å›¢é˜Ÿç®¡ç†å‘˜è·å–æœåŠ¡å™¨åœ°å€ï¼Œå®¢æˆ·ç«¯æ— æ³•åœ¨æ²¡æœ‰æœåŠ¡å™¨çš„æƒ…å†µä¸‹å·¥ä½œã€‚

### Q: å¦‚ä½•æ’æŸ¥æ•°æ®æ”¶é›†é—®é¢˜ï¼Ÿ
A: 
```bash
# å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
CLAUDE_STATS_DEBUG=true claude-stats debug --logs

# æ£€æŸ¥çŠ¶æ€æ–‡ä»¶
claude-stats debug

# å¦‚æœ‰é—®é¢˜ï¼Œæ¸…ç†çŠ¶æ€é‡æ–°å¼€å§‹
claude-stats cleanup
```

## ğŸ”’ éšç§è¯´æ˜

- âœ… åªæ”¶é›†ä½¿ç”¨ç»Ÿè®¡ï¼Œä¸æ”¶é›†ä»£ç å†…å®¹
- âœ… æ•°æ®å­˜å‚¨åœ¨ç‹¬ç«‹çš„ SQLite æ•°æ®åº“
- âœ… å¯éšæ—¶ç¦ç”¨è·Ÿè¸ªï¼š`claude-stats toggle`
- âœ… å¯å®Œå…¨å¸è½½ï¼š`claude-stats reset`

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### ç‰ˆæœ¬å†å²

- **v3.0** (Latest) - æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬
  - âœ… åŠ¨æ€æ‰¹æ¬¡å¤§å°ï¼Œæ™ºèƒ½è°ƒæ•´å¤„ç†ç­–ç•¥
  - âœ… è¶…æ—¶ä¿æŠ¤ï¼Œé˜²æ­¢å¤§æ•°æ®é‡å¡æ­»
  - âœ… è¿›åº¦æŠ¥å‘Šï¼Œå®æ—¶æ˜¾ç¤ºå¤„ç†çŠ¶æ€
  - âœ… æ€§èƒ½æå‡ 4-5 å€ï¼Œæ”¯æŒ 20,000+ æ¡æ•°æ®
  - âœ… åŒ…å« v2 æ‰€æœ‰åŠŸèƒ½

- **v1.0 & v2.0** - æ—©æœŸç‰ˆæœ¬
  - âŒ åªæ”¶é›†æœ€æ–°è®°å½•ï¼Œå­˜åœ¨æ•°æ®ä¸¢å¤±
  - âŒ æ— çŠ¶æ€ç®¡ç†
  - âŒ æ— é‡è¯•æœºåˆ¶

### æ½œåœ¨æ”¹è¿›æ–¹å‘

- **åŠŸèƒ½å¢å¼º**
  - æ·»åŠ å¯é€‰çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
  - æ”¯æŒæ•°æ®å¯¼å‡ºï¼ˆCSV/JSONï¼‰
  - æ›´è¯¦ç»†çš„ç»Ÿè®¡ç»´åº¦ï¼ˆæŒ‰æ¨¡å‹ã€æŒ‰æ—¶é—´æ®µç­‰ï¼‰
  - æ•°æ®ç®¡ç†åŠŸèƒ½ï¼ˆæ¸…ç†ã€å½’æ¡£ï¼‰
  
- **æ€§èƒ½ä¼˜åŒ–**
  - Dashboard ç¼“å­˜æœºåˆ¶
  - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
  - å¤§è§„æ¨¡éƒ¨ç½²æ”¯æŒ
  
- **éƒ¨ç½²æ”¯æŒ**
  - æ›´å¤šäº‘å¹³å°éƒ¨ç½²æŒ‡å—ï¼ˆVercelã€Railwayç­‰ï¼‰
  - Kubernetes éƒ¨ç½²é…ç½®
  - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

### å¼€å‘æŒ‡å—

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ License

MIT

## ğŸ™ è‡´è°¢

- åŸé¡¹ç›®åŸºäº [claude-code-leaderboard](https://github.com/grp06/claude-code-leaderboard)
- æ„Ÿè°¢ Claude å›¢é˜Ÿæä¾›çš„ Hook æœºåˆ¶